<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ì¶”ì²¨ ì‹œìŠ¤í…œ</title>

<style>
body {
    background: #020617;
    color: white;
    font-family: sans-serif;
    text-align:center;
    margin-top:100px;
}

.slot {
    font-size:100px;
    width:220px;
    height:220px;
    margin:auto;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:20px;
    border:3px solid cyan;
    box-shadow:0 0 20px cyan, inset 0 0 20px cyan;
    overflow:hidden;
    position:relative;
}

.numbers {
    position:absolute;
    transition: transform 1s cubic-bezier(.25,.8,.25,1);
}

.num {
    height:220px;
    display:flex;
    align-items:center;
    justify-content:center;
}

button {
    margin-top:40px;
    padding:15px 40px;
    font-size:20px;
    background:cyan;
    border:none;
    border-radius:10px;
    cursor:pointer;
}
</style>
</head>

<body>

<h1>ğŸ° ì¶”ì²¨</h1>

<div class="slot">
    <div class="numbers" id="numbers"></div>
</div>

<br>
<button onclick="draw()">ì¶”ì²¨</button>

<script>

let min = 1;
let max = 50;
let forcedNumber = null;

// ê´€ë¦¬ì°½ ìë™ ì‹¤í–‰
window.onload = function() {
    window.open("control.html","ê´€ë¦¬ì°½","width=400,height=600");
}

window.addEventListener("message", (event) => {
    if(event.data.type === "set"){
        min = event.data.min;
        max = event.data.max;
        forcedNumber = event.data.force;
    }
});

function draw(){

    let container = document.getElementById("numbers");

    let final = forcedNumber !== null
        ? forcedNumber
        : Math.floor(Math.random()*(max-min+1))+min;

    forcedNumber = null;

    // ìŠ¬ë¡¯ ë¦¬ìŠ¤íŠ¸ ë§Œë“¤ê¸°
    container.innerHTML = "";

    let total = 20; // ìŠ¬ë¡¯ ê¸¸ì´

    for(let i=0;i<total;i++){
        let div = document.createElement("div");
        div.className="num";
        div.innerText = Math.floor(Math.random()*(max-min+1))+min;
        container.appendChild(div);
    }

    let finalDiv = document.createElement("div");
    finalDiv.className="num";
    finalDiv.innerText = final;
    container.appendChild(finalDiv);

    container.style.transform="translateY(0px)";

    setTimeout(()=>{
        container.style.transform =
            "translateY(-"+(220*total)+"px)";
    },50);

}

</script>

</body>
</html>
