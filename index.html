<!DOCTYPE html>
<html>
<head>
  <title>ì¶”ì²¨ ì‹œìŠ¤í…œ</title>
  <style>
    body{
      margin:0;
      height:100vh;
      background:#0f172a;
      display:flex;
      justify-content:center;
      align-items:center;
      font-family:sans-serif;
      color:white;
    }

    .card{
      background:#111827;
      padding:40px;
      border-radius:20px;
      box-shadow:0 0 40px rgba(0,255,200,0.1);
      text-align:center;
      width:320px;
      position:relative;
    }

    h1{ color:#00ffc8; }

    button{
      background:#1f2937;
      border:none;
      color:white;
      padding:12px 20px;
      margin:8px;
      border-radius:10px;
      cursor:pointer;
      transition:0.3s;
    }

    button:hover{
      background:#00ffc8;
      color:black;
      transform:scale(1.05);
    }

    #result{
      margin-top:20px;
      font-size:24px;
      color:#00ffc8;
    }

    /* ê²°ê³¼ ë„¤ì˜¨ ë°•ìŠ¤ */
    #resultBox{
      display:none;
      position:fixed;
      top:50%;
      left:50%;
      transform:translate(-50%, -50%);
      background:#020617;
      padding:30px;
      border-radius:20px;
      box-shadow:0 0 20px #00ffc8, 0 0 60px #00ffc8;
      width:300px;
      max-height:400px;
      overflow:auto;
      text-align:left;
      animation:glow 1.5s infinite alternate;
    }

    @keyframes glow{
      from{ box-shadow:0 0 10px #00ffc8; }
      to{ box-shadow:0 0 30px #00ffc8; }
    }

    #resultList{
      margin-top:10px;
      font-size:18px;
    }

  </style>
</head>

<body>

<div class="card">
  <h1>ğŸì¶”ì²¨ ì‹œìŠ¤í…œğŸ</h1>

  <button onclick="setup()">ì„¤ì •</button>
  <button onclick="draw()">ë½‘ê¸° ì‹œì‘!</button>
  <button onclick="resetGame()">ë¦¬ì…‹</button>

  <h2 id="result"></h2>
</div>

<!-- ê²°ê³¼ ë°•ìŠ¤ -->
<div id="resultBox">
  <h2>ì¶”ì²¨ ê²°ê³¼</h2>
  <div id="resultList"></div>
  <br>
  <button onclick="closeResult()">í™•ì¸</button>
</div>

<script>
let min, max, target, rigTurn, maxDraw;
let count = 0;
let history = [];
let allowDuplicate = true;
let usedNumbers = [];

function setup(){

  min = parseInt(prompt("ìµœì†Œê°’ ì…ë ¥"));
  max = parseInt(prompt("ìµœëŒ€ê°’ ì…ë ¥"));

  let dup = prompt("ì¤‘ë³µ í—ˆìš©? (y / n)").toLowerCase();
  allowDuplicate = dup === "y";

  target = parseInt(prompt("ì›í•˜ëŠ” ë‹¹ì²¨ ë²ˆí˜¸ ì…ë ¥"));
  rigTurn = parseInt(prompt("ëª‡ ë²ˆì§¸ì— ë‹¹ì²¨?"));

  if(allowDuplicate){
    maxDraw = parseInt(prompt("ì´ ëª‡ ë²ˆ ë½‘ì„ê¹Œ?"));
  } else {
    maxDraw = max - min + 1;
    alert("ì¤‘ë³µ ì—†ìŒ â†’ ìë™ " + maxDraw + "ë²ˆ ì§„í–‰");
  }

  count = 0;
  history = [];
  usedNumbers = [];

  document.getElementById("result").innerText = "ì„¤ì • ì™„ë£Œ!";
}

function draw(){

  if(count >= maxDraw){
    showResult();
    return;
  }

  count++;
  let result;

  if(count == rigTurn){
    result = target;
  } else {
    do {
      result = Math.floor(Math.random()*(max-min+1))+min;
    } while(!allowDuplicate && usedNumbers.includes(result));
  }

  usedNumbers.push(result);
  history.push(count + "ë²ˆì§¸ â†’ " + result);

  document.getElementById("result").innerText = count + "ë²ˆì§¸ ê²°ê³¼ : " + result;

  if(count >= maxDraw){
    setTimeout(showResult, 500);
  }
}

function showResult(){
  let list = document.getElementById("resultList");
  list.innerHTML = "";

  history.forEach(item=>{
    list.innerHTML += "<div>" + item + "</div>";
  });

  document.getElementById("resultBox").style.display = "block";
}

function closeResult(){
  document.getElementById("resultBox").style.display = "none";
  resetGame();
}

function resetGame(){
  min = null;
  max = null;
  target = null;
  rigTurn = null;
  maxDraw = null;
  count = 0;
  history = [];
  usedNumbers = [];

  document.getElementById("result").innerText = "ì´ˆê¸°í™” ì™„ë£Œ!";
}
</script>

</body>
</html>
