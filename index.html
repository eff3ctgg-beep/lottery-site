<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ì¶”ì²¨ ì‹œìŠ¤í…œ</title>

<style>
body {
    background:#020617;
    color:white;
    font-family:sans-serif;
    text-align:center;
    margin-top:60px;
}

input {
    padding:8px;
    margin:5px;
    width:80px;
}

button {
    padding:8px 20px;
    margin:10px;
    font-size:15px;
    cursor:pointer;
}

.result-box {
    margin-top:40px;
    height:70px;
    width:160px;
    margin-left:auto;
    margin-right:auto;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:40px;
    border:2px solid cyan;
    border-radius:12px;
    box-shadow:0 0 15px cyan;
    overflow:hidden;
    position:relative;
}

/* ìŠ¬ë¡¯ */
.slot-track {
    position:absolute;
}

.slot-num {
    height:70px;
    width:160px;
    display:flex;
    align-items:center;
    justify-content:center;
}

/* ìµœì¢… ê³ ì • ìˆ«ì */
.final-number {
    position:absolute;
    font-size:40px;
    display:none;
}
</style>
</head>

<body>

<h2>ğŸ¯ ì¶”ì²¨ ì„¤ì •</h2>

ìµœì†Œê°’ <input id="min" type="number" value="1">
ìµœëŒ€ê°’ <input id="max" type="number" value="50">

<br>
<button onclick="draw()">ì¶”ì²¨</button>

<div class="result-box">
    <div class="slot-track" id="track"></div>
    <div class="final-number" id="final"></div>
</div>

<script>

let forcedNumber = null;

// ê´€ë¦¬ì°½ ìë™ ì˜¤í”ˆ
window.onload = function(){
    window.open("control.html","ê´€ë¦¬ì°½","width=400,height=600");
}

window.addEventListener("message",(e)=>{
    if(e.data.type==="force"){
        forcedNumber = e.data.number;
    }
});

function draw(){

    let min = parseInt(document.getElementById("min").value);
    let max = parseInt(document.getElementById("max").value);

    let final = forcedNumber !== null
        ? forcedNumber
        : Math.floor(Math.random()*(max-min+1))+min;

    forcedNumber = null;

    let track = document.getElementById("track");
    let finalBox = document.getElementById("final");

    finalBox.style.display="none";
    track.innerHTML="";

    let rollCount = 15;
    let height = 70;

    for(let i=0;i<rollCount;i++){
        let div=document.createElement("div");
        div.className="slot-num";
        div.innerText = Math.floor(Math.random()*(max-min+1))+min;
        track.appendChild(div);
    }

    let finalDiv=document.createElement("div");
    finalDiv.className="slot-num";
    finalDiv.innerText=final;
    track.appendChild(finalDiv);

    track.style.transition="none";
    track.style.transform="translateY(0px)";

    setTimeout(()=>{
        track.style.transition="transform 1s cubic-bezier(.25,.8,.25,1)";
        track.style.transform="translateY(-"+(height*rollCount)+"px)";
    },50);

    // â­ ì• ë‹ˆë©”ì´ì…˜ ëë‚˜ë©´ ìµœì¢…ë²ˆí˜¸ ê³ ì • í‘œì‹œ
    setTimeout(()=>{
        finalBox.innerText = final;
        finalBox.style.display="block";
    },1100);
}
</script>

</body>
</html>
